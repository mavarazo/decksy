<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>
<!-- Header content -->
<th:block layout:fragment="content-header">
    <h1>
        Decks
        <!--small>All decks</small-->
    </h1>
    <!--ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Dashboard</li>
    </ol-->
</th:block>

<!-- Main content -->
<th:block layout:fragment="content-body">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <!--h3 class="box-title">Decklist</h3-->

                    <div class="box-tools">
                        <form action="#" th:action="@{/deck/}" th:object="${deck}" method="post">
                            <div class="input-group">
                                <input type="text" class="form-control pull-right" th:field="*{name}" id="name" placeholder="Name">
                                <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>

                                <div class="input-group-btn">
                                    <button type="submit" class="btn btn-primary btn-flat"><i class="fa fa-plus"></i> Add Deck</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <table id="deckTable" class="table table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>Name</th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <th>Name</th>
                        </tr>
                        </tfoot>
                    </table>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
</th:block>

<th:block layout:fragment="script">
    <script type="application/javascript">
        $(function () {
            $('#deckTable').DataTable({
                'ajax': {
                    'url': '/api/deck/all',
                    'dataSrc': ''
                },
                'columns': [
                    {
                        'data': 'name',
                         'render': function ( data, type, row, meta ) {
                            return '<a href="/deck/' + row.id + '">' + data + '</a>';
                        }
                    },
                ],
            })
        })


    </script>
</th:block>
</body>
</html>

